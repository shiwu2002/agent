<!--pages/VoiceCall/VoiceCall.wxml-->
<view class="container">
  <!-- é€šè¯çŠ¶æ€æ˜¾ç¤º -->
  <view class="status-section">
    <image class="avatar" src="{{targetUser.avatar}}" mode="aspectFill"></image>
    <text class="user-name">{{targetUser.name}}</text>
    <text class="status-text">{{callStatus}}</text>
  </view>

  <!-- é€šè¯æ—¶é—´æ˜¾ç¤º -->
  <view class="timer-section" wx:if="{{isConnected}}">
    <text class="timer">{{formatTime(callDuration)}}</text>
  </view>

  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="controls-section">
    <!-- é™éŸ³æŒ‰é’® -->
    <view class="control-btn" bindtap="toggleMute">
      <view class="btn-icon {{isMuted ? 'muted' : ''}}">
        <text class="iconfont">{{isMuted ? 'ğŸ”‡' : 'éº¦å…‹é£'}}</text>
      </view>
      <text class="btn-label">{{isMuted ? 'å–æ¶ˆé™éŸ³' : 'é™éŸ³'}}</text>
    </view>

    <!-- æŒ‚æ–­æŒ‰é’® -->
    <view class="control-btn hangup-btn" bindtap="hangupCall">
      <view class="btn-icon hangup">
        <text class="iconfont">æŒ‚æ–­</text>
      </view>
      <text class="btn-label">æŒ‚æ–­</text>
    </view>

    <!-- å…ææŒ‰é’® -->
    <view class="control-btn" bindtap="toggleSpeaker">
      <view class="btn-icon {{isSpeakerOn ? 'speaker-on' : ''}}">
        <text class="iconfont">{{isSpeakerOn ? 'ğŸ”Š' : 'ğŸ”ˆ'}}</text>
      </view>
      <text class="btn-label">{{isSpeakerOn ? 'å…æå¼€' : 'å…æå…³'}}</text>
    </view>
  </view>

  <!-- å½•éŸ³æŒ‰é’® -->
  <view class="record-section">
    <view class="record-btn {{isRecording ? 'recording' : ''}}" bindtouchstart="startRecording" bindtouchend="stopRecording" bindtouchcancel="stopRecording">
      <text class="record-text">{{isRecording ? 'æ¾å¼€ç»“æŸ' : 'æŒ‰ä½è¯´è¯'}}</text>
    </view>
  </view>

  <!-- ç½‘ç»œçŠ¶æ€ -->
  <view class="network-status">
    <text class="status-indicator {{connectionStatus === 'å·²è¿æ¥' ? 'connected' : 'disconnected'}}"></text>
    <text class="status-text">{{connectionStatus}}</text>
  </view>
</view>