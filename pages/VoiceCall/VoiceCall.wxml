<view class="voice-interface">
  <view class="status-bar">
    <!-- 连接状态指示器 -->
    <view class="status-indicator {{isConnected ? 'connected' : 'disconnected'}}"></view>
    <view class="status-text">{{statusMessage}}</view>
    <button 
      bindtap="connectWebSocket" 
      disabled="{{isConnected}}" 
      class="connect-btn"
    >
      连接
    </button>
    <button 
      bindtap="disconnectWebSocket" 
      disabled="{{!isConnected}}" 
      class="disconnect-btn"
    >
      断开
    </button>
  </view>

  <!-- 控制按钮 -->
  <view class="control-buttons">
    <button 
      bindtap="startRecording" 
      disabled="{{!isConnected || isListening}}"
      class="record-btn {{isListening ? 'active' : ''}}"
    >
      {{isListening ? '识别中...' : '开始录音'}}
    </button>
    <button 
      bindtap="stopRecording" 
      disabled="{{!isConnected || !isListening}}"
      class="stop-btn"
    >
      停止录音
    </button>
    <button 
      bindtap="interruptRecognition" 
      disabled="{{!isConnected}}"
      class="interrupt-btn"
    >
      打断
    </button>
  </view>

  <!-- 实时识别结果 -->
  <view class="recognition-result">
    <view class="section-title">实时识别结果</view>
    <view class="result-box">{{recognitionResult}}</view>
  </view>

  <!-- 识别历史 -->
  <view class="final-results">
    <view class="results-header">
      <view class="section-title">识别历史</view>
      <button bindtap="clearResults" class="clear-btn">清空</button>
    </view>
    <view class="results-list">
      <view class="result-item" wx:for="{{finalResults}}" wx:key="index">
        {{item}}
      </view>
      <view class="no-results" wx:if="{{finalResults.length === 0}}">
        暂无识别结果
      </view>
    </view>
  </view>
  
  <!-- AI回复播放状态 -->
  <view class="ai-response-status" wx:if="{{isConnected}}">
    <view class="section-title">AI语音回复</view>
    <view class="status-text">正在播放AI回复...</view>
  </view>
</view>